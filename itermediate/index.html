
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="songzhenhe">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Itermediate - Technical Notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#collections" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Technical Notes" class="md-header__button md-logo" aria-label="Technical Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Technical Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Itermediate
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/songzhenhe/tech-note/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Technical Notes" class="md-nav__button md-logo" aria-label="Technical Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Technical Notes
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/songzhenhe/tech-note/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        Basic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intermediate.md" class="md-nav__link">
        intermediate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module/" class="md-nav__link">
        Module
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#counter" class="md-nav__link">
    Counter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namedtuple" class="md-nav__link">
    namedtuple
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/songzhenhe/tech-note/edit/master/docs/itermediate.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <div class="toc">
<ul>
<li><a href="#collections">Collections</a><ul>
<li><a href="#counter">Counter</a></li>
<li><a href="#namedtuple">namedtuple</a></li>
</ul>
</li>
<li><a href="#comprehensions">Comprehensions</a><ul>
<li><a href="#list-comprehensions">list comprehensions</a></li>
<li><a href="#dict-comprehensions">dict comprehensions</a></li>
<li><a href="#set-comprehensions">set comprehensions</a></li>
<li><a href="#generator-comprehensions">generator comprehensions</a></li>
</ul>
</li>
<li><a href="#decorators">Decorators</a><ul>
<li><a href="#defining-functions-within-functions">Defining functions within functions:</a></li>
<li><a href="#returning-functions-from-within-functions">Returning functions from within functions:</a></li>
<li><a href="#giving-a-function-as-an-argument-to-another-function">Giving a function as an argument to another function:</a></li>
<li><a href="#writing-your-first-decorator">Writing your first decorator:</a><ul>
<li><a href="#use-cases">Use-cases:</a></li>
<li><a href="#logging">Logging</a></li>
</ul>
</li>
<li><a href="#decorators-with-arguments">Decorators with Arguments</a><ul>
<li><a href="#nesting-a-decorator-within-a-function">Nesting a Decorator Within a Function</a></li>
<li><a href="#decorator-classes">Decorator Classes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#enumerate">Enumerate</a></li>
<li><a href="#file-handling">File Handling</a><ul>
<li><a href="#ignore-rows">Ignore Rows</a></li>
</ul>
</li>
<li><a href="#generators">Generators</a><ul>
<li><a href="#iterable">Iterable</a></li>
<li><a href="#iterator">Iterator</a></li>
<li><a href="#iteration">Iteration</a></li>
<li><a href="#generators-generators-1">Generators {#generators-1}</a></li>
</ul>
</li>
<li><a href="#lambdas">Lambdas</a></li>
<li><a href="#typing">Typing</a></li>
</ul>
</div>
<h1 id="collections">Collections<a class="headerlink" href="#collections" title="Permanent link">&para;</a></h1>
<p>Python ships with a module that contains a number of container data
types called Collections:</p>
<ul>
<li><code>Counter</code></li>
<li><code>namedtuple</code></li>
</ul>
<h2 id="counter">Counter<a class="headerlink" href="#counter" title="Permanent link">&para;</a></h2>
<p>Counter allows us to count the occurrences of a particular item. For
instance it can be used to count the number of individual favourite
colours:</p>
<pre><code class="language-python">from collections import Counter

colours = (
    ('Jack', 'Yellow'),
    ('Bob', 'Blue'),
    ('Alice', 'Green'),
    ('Simon', 'Black'),
    ('Bob', 'Red'),
    ('Alice', 'Silver'),
)

favs = Counter(name for name, colour in colours)
print(favs)
</code></pre>
<p>We can also count the most common lines in a file using it. For example:</p>
<pre><code class="language-python">with open('filename', 'rb') as f:
    line_count = Counter(f)
print(line_count)
</code></pre>
<h2 id="namedtuple">namedtuple<a class="headerlink" href="#namedtuple" title="Permanent link">&para;</a></h2>
<p>You might already be acquainted with tuples. A tuple is basically a
immutable list which allows you to store a sequence of values separated
by commas. They are just like lists but have a few key differences. The
major one is that unlike lists, <strong>you can not reassign an item in a
tuple</strong>. In order to access the value in a tuple you use integer indexes
like:</p>
<pre><code class="language-python">man = ('Ali', 30)
print(man[0])
# Output: Ali
</code></pre>
<p>Well, so now what are <code>namedtuples</code>? They turn tuples into convenient
containers for simple tasks. With namedtuples you don\'t have to use
integer indexes for accessing members of a tuple. You can think of
namedtuples like dictionaries but unlike dictionaries they are
immutable.</p>
<pre><code class="language-python">from collections import namedtuple

Animal = namedtuple('Animal', 'name age type')
perry = Animal(name=&quot;perry&quot;, age=31, type=&quot;cat&quot;)

print(perry)
# Output: Animal(name='perry', age=31, type='cat')

print(perry.name)
# Output: 'perry'
</code></pre>
<p>You can now see that we can access members of a tuple just by their name
using a <code>.</code>. Let's dissect it a little more. A named tuple has two
required arguments. They are the tuple name and the tuple field_names.
In the above example our tuple name was 'Animal' and the tuple
field_names were 'name', 'age' and 'type'. Namedtuple makes your
tuples <strong>self-document</strong>. You can easily understand what is going on by
having a quick glance at your code. And as you are not bound to use
integer indexes to access members of a tuple, it makes it more easy to
maintain your code. Moreover, as <strong><code>namedtuple</code> instances do not have
per-instance dictionaries</strong>, they are lightweight and require no more
memory than regular tuples. This makes them faster than dictionaries.
However, do remember that as with tuples, <strong>attributes in namedtuples
are immutable</strong>. It means that this would not work:</p>
<pre><code class="language-python">from collections import namedtuple

Animal = namedtuple('Animal', 'name age type')
perry = Animal(name=&quot;perry&quot;, age=31, type=&quot;cat&quot;)
perry.age = 42

# Output: Traceback (most recent call last):
#            File &quot;&quot;, line 1, in
#         AttributeError: can't set attribute
</code></pre>
<p>You should use named tuples to make your code self-documenting. <strong>They
are backwards compatible with normal tuples</strong>. It means that you can use
integer indexes with namedtuples as well:</p>
<pre><code class="language-python">from collections import namedtuple

Animal = namedtuple('Animal', 'name age type')
perry = Animal(name=&quot;perry&quot;, age=31, type=&quot;cat&quot;)
print(perry[0])
# Output: perry
</code></pre>
<p>Last but not the least, you can convert a namedtuple to a dictionary.
Like this:</p>
<pre><code class="language-python">from collections import namedtuple

Animal = namedtuple('Animal', 'name age type')
perry = Animal(name=&quot;Perry&quot;, age=31, type=&quot;cat&quot;)
print(perry._asdict())
# Output: OrderedDict([('name', 'Perry'), ('age', 31), ...
</code></pre>
<h1 id="comprehensions">Comprehensions<a class="headerlink" href="#comprehensions" title="Permanent link">&para;</a></h1>
<p>Comprehensions are constructs that allow
sequences to be built from other sequences. Several types of
comprehensions are supported:</p>
<ul>
<li>list comprehensions</li>
<li>dictionary comprehensions</li>
<li>set comprehensions</li>
<li>generator comprehensions</li>
</ul>
<h2 id="list-comprehensions"><code>list</code> comprehensions<a class="headerlink" href="#list-comprehensions" title="Permanent link">&para;</a></h2>
<p>List comprehensions provide a short and concise way to create lists. It
consists of square brackets containing an expression followed by a <code>for</code>
clause, then zero or more <code>for</code> or <code>if</code> clauses. The expressions can be
anything, meaning you can put in all kinds of objects in lists. The
result would be a new list made after the evaluation of the expression
in context of the <code>if</code> and <code>for</code> clauses.</p>
<p><strong>Blueprint</strong></p>
<pre><code class="language-python">variable = [out_exp for out_exp in input_list if out_exp == 2]
</code></pre>
<p>Here is a short example:</p>
<pre><code class="language-python">multiples = [i for i in range(30) if i % 3 == 0]
print(multiples)
# Output: [0, 3, 6, 9, 12, 15, 18, 21, 24, 27]
</code></pre>
<p>This can be really useful to make lists quickly. It is even preferred by
some instead of the <code>filter</code> function. List comprehensions really shine
when you want to supply a list to a method or function to make a new
list by appending to it in each iteration of the <code>for</code> loop. For
instance you would usually do something like this:</p>
<pre><code class="language-python">squared = []
for x in range(10):
    squared.append(x**2)
</code></pre>
<p>You can simplify it using list comprehensions. For example:</p>
<pre><code class="language-python">squared = [x**2 for x in range(10)]
</code></pre>
<h2 id="dict-comprehensions"><code>dict</code> comprehensions<a class="headerlink" href="#dict-comprehensions" title="Permanent link">&para;</a></h2>
<p>They are used in a similar way. Here is an example which I found
recently:</p>
<pre><code class="language-python">mcase = {'a': 10, 'b': 34, 'A': 7, 'Z': 3}

mcase_frequency = {
    k.lower(): mcase.get(k.lower(), 0) + mcase.get(k.upper(), 0)
    for k in mcase.keys()
}

# mcase_frequency == {'a': 17, 'z': 3, 'b': 34}
</code></pre>
<p>In the above example we are combining the values of keys which are same
but in different typecase. I personally do not use <code>dict</code> comprehensions
a lot. You can also quickly switch keys and values of a dictionary:</p>
<pre><code class="language-python">{v: k for k, v in some_dict.items()}
</code></pre>
<h2 id="set-comprehensions"><code>set</code> comprehensions<a class="headerlink" href="#set-comprehensions" title="Permanent link">&para;</a></h2>
<p>They are also similar to list comprehensions. The only difference is
that they use braces <code>{}</code>. Here is an example:</p>
<pre><code class="language-python">squared = {x**2 for x in [1, 1, 2]}
print(squared)
# Output: {1, 4}
</code></pre>
<h2 id="generator-comprehensions"><code>generator</code> comprehensions<a class="headerlink" href="#generator-comprehensions" title="Permanent link">&para;</a></h2>
<p>They are also similar to list comprehensions. The only difference is
that they don't allocate memory for the whole list but generate one
item at a time, thus more memory efficient.</p>
<pre><code class="language-python">multiples_gen = (i for i in range(30) if i % 3 == 0)
print(multiples_gen)
# Output: &lt;generator object &lt;genexpr&gt; at 0x7fdaa8e407d8&gt;
for x in multiples_gen:
  print(x)
  # Outputs numbers
</code></pre>
<h1 id="decorators">Decorators<a class="headerlink" href="#decorators" title="Permanent link">&para;</a></h1>
<p>Decorators dynamically alter the functionality of a function, method, 
or class without having to directly use subclasses or change the source code of 
the function being decorated.</p>
<h2 id="defining-functions-within-functions">Defining functions within functions:<a class="headerlink" href="#defining-functions-within-functions" title="Permanent link">&para;</a></h2>
<p>In Python we can define functions inside other functions:</p>
<pre><code class="language-python">def hi(name=&quot;bigriver&quot;):
    print(&quot;now you are inside the hi() function&quot;)

    def greet():
        return &quot;now you are in the greet() function&quot;

    def welcome():
        return &quot;now you are in the welcome() function&quot;

    print(greet())
    print(welcome())
    print(&quot;now you are back in the hi() function&quot;)

hi()
#output:now you are inside the hi() function
#       now you are in the greet() function
#       now you are in the welcome() function
#       now you are back in the hi() function

# This shows that whenever you call hi(), greet() and welcome()
# are also called. However the greet() and welcome() functions
# are not available outside the hi() function e.g:

greet()
#outputs: NameError: name 'greet' is not defined
</code></pre>
<p>So now we know that we can define functions in other functions. In other
words: we can make nested functions. Now you need to learn one more
thing, that functions can return functions too.</p>
<h2 id="returning-functions-from-within-functions">Returning functions from within functions:<a class="headerlink" href="#returning-functions-from-within-functions" title="Permanent link">&para;</a></h2>
<p>It is not necessary to execute a function within another function, we
can return it as an output as well:</p>
<pre><code class="language-python">def hi(name=&quot;bigriver&quot;):
    def greet():
        return &quot;now you are in the greet() function&quot;

    def welcome():
        return &quot;now you are in the welcome() function&quot;

    if name == &quot;bigriver&quot;:
        return greet
    else:
        return welcome

a = hi()
print(a)
#outputs: &lt;function greet at 0x7f2143c01500&gt;

#This clearly shows that `a` now points to the greet() function in hi()
#Now try this

print(a())
#outputs: now you are in the greet() function
</code></pre>
<p>Just take a look at the code again. In the <code>if else</code> clause we are
returning <code>greet</code> and <code>welcome</code>, not <code>greet()</code> and <code>welcome()</code>. Why is
that? It's because when you put a <strong>pair of parentheses</strong> after it, the
function gets executed; whereas if you don't put parenthesis after it,
then it can be passed around and can be assigned to other variables
without executing it. Did you get it? Let me explain it in a little bit
more detail. When we write <code>a = hi()</code>, <code>hi()</code> gets executed and because
the name is bigriver by default, the function <code>greet</code> is returned. If we
change the statement to <code>a = hi(name = "ali")</code> then the <code>welcome</code>
function will be returned. We can also do print <code>hi()()</code> which outputs
<em>now you are in the greet() function</em>.</p>
<h2 id="giving-a-function-as-an-argument-to-another-function">Giving a function as an argument to another function:<a class="headerlink" href="#giving-a-function-as-an-argument-to-another-function" title="Permanent link">&para;</a></h2>
<pre><code class="language-python">def hi():
    return &quot;hi bigriver!&quot;

def doSomethingBeforeHi(func):
    print(&quot;I am doing some boring work before executing hi()&quot;)
    print(func())

doSomethingBeforeHi(hi)
#outputs:I am doing some boring work before executing hi()
#        hi bigriver!
</code></pre>
<p>Now you have all the required knowledge to learn what decorators really
are. Decorators let you execute code before and after a function.</p>
<h2 id="writing-your-first-decorator">Writing your first decorator:<a class="headerlink" href="#writing-your-first-decorator" title="Permanent link">&para;</a></h2>
<p>In the last example we actually made a decorator! Let\'s modify the
previous decorator and make a little bit more usable program:</p>
<pre><code class="language-python">def a_new_decorator(a_func):

    def wrapTheFunction():
        print(&quot;I am doing some boring work before executing a_func()&quot;)

        a_func()

        print(&quot;I am doing some boring work after executing a_func()&quot;)

    return wrapTheFunction

def a_function_requiring_decoration():
    print(&quot;I am the function which needs some decoration to remove my foul smell&quot;)

a_function_requiring_decoration()
#outputs: &quot;I am the function which needs some decoration to remove my foul smell&quot;

a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)
#now a_function_requiring_decoration is wrapped by wrapTheFunction()

a_function_requiring_decoration()
#outputs:I am doing some boring work before executing a_func()
#        I am the function which needs some decoration to remove my foul smell
#        I am doing some boring work after executing a_func()
</code></pre>
<p>Did you get it? We just applied the previously learned principles. This
is exactly what the decorators do in Python! They wrap a function and
modify its behaviour in one way or another. Now you might be wondering
why we did not use the @ anywhere in our code? That is just a short way
of making up a decorated function. Here is how we could have run the
previous code sample using @.</p>
<pre><code class="language-python">@a_new_decorator
def a_function_requiring_decoration():
    &quot;&quot;&quot;Hey you! Decorate me!&quot;&quot;&quot;
    print(&quot;I am the function which needs some decoration to &quot;
          &quot;remove my foul smell&quot;)

a_function_requiring_decoration()
#outputs: I am doing some boring work before executing a_func()
#         I am the function which needs some decoration to remove my foul smell
#         I am doing some boring work after executing a_func()

#the @a_new_decorator is just a short way of saying:
a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)
</code></pre>
<p>I hope you now have a basic understanding of how decorators work in
Python. Now there is one problem with our code. If we run:</p>
<pre><code class="language-python">print(a_function_requiring_decoration.__name__)
# Output: wrapTheFunction
</code></pre>
<p>That's not what we expected! Its name is
"a_function_requiring_decoration". Well, our function was replaced
by wrapTheFunction. It overrode the name and docstring of our function.
Luckily, Python provides us a simple function to solve this problem and
that is <code>functools.wraps</code>. Let's modify our previous example to use
<code>functools.wraps</code>:</p>
<pre><code class="language-python">from functools import wraps

def a_new_decorator(a_func):
    @wraps(a_func)
    def wrapTheFunction():
        print(&quot;I am doing some boring work before executing a_func()&quot;)
        a_func()
        print(&quot;I am doing some boring work after executing a_func()&quot;)
    return wrapTheFunction

@a_new_decorator
def a_function_requiring_decoration():
    &quot;&quot;&quot;Hey yo! Decorate me!&quot;&quot;&quot;
    print(&quot;I am the function which needs some decoration to &quot;
          &quot;remove my foul smell&quot;)

print(a_function_requiring_decoration.__name__)
# Output: a_function_requiring_decoration
</code></pre>
<p>Now that is much better. Let\'s move on and learn some use-cases of
decorators.</p>
<p><strong>Blueprint:</strong></p>
<pre><code class="language-python">from functools import wraps
def decorator_name(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        if not can_run:
            return &quot;Function will not run&quot;
        return f(*args, **kwargs)
    return decorated

@decorator_name
def func():
    return(&quot;Function is running&quot;)

can_run = True
print(func())
# Output: Function is running

can_run = False
print(func())
# Output: Function will not run
</code></pre>
<p>Note: <code>@wraps</code> takes a function to be decorated and adds the
functionality of copying over the function name, docstring, arguments
list, etc. This allows us to access the pre-decorated function\'s
properties in the decorator.</p>
<h3 id="use-cases">Use-cases:<a class="headerlink" href="#use-cases" title="Permanent link">&para;</a></h3>
<p>Now let\'s take a look at the areas where decorators really shine and
their usage makes something really easy to manage.</p>
<p>Authorization \~\~\~\~\~\~\~\~\~\~\~\~</p>
<p>Decorators can help to check whether someone is authorized to use an
endpoint in a web application. They are extensively used in Flask web
framework and Django. Here is an example to employ decorator based
authentication:</p>
<p><strong>Example :</strong></p>
<pre><code class="language-python">from functools import wraps

def requires_auth(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        auth = request.authorization
        if not auth or not check_auth(auth.username, auth.password):
            authenticate()
        return f(*args, **kwargs)
    return decorated
</code></pre>
<h3 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">&para;</a></h3>
<p>Logging is another area where the decorators shine. Here is an example:</p>
<pre><code class="language-python">from functools import wraps

def logit(func):
    @wraps(func)
    def with_logging(*args, **kwargs):
        print(func.__name__ + &quot; was called&quot;)
        return func(*args, **kwargs)
    return with_logging

@logit
def addition_func(x):
   &quot;&quot;&quot;Do some math.&quot;&quot;&quot;
   return x + x


result = addition_func(4)
# Output: addition_func was called
</code></pre>
<p>I am sure you are already thinking about some clever uses of decorators.</p>
<h2 id="decorators-with-arguments">Decorators with Arguments<a class="headerlink" href="#decorators-with-arguments" title="Permanent link">&para;</a></h2>
<p>Come to think of it, isn't <code>@wraps</code> also a decorator? But, it takes an
argument like any normal function can do. So, why can\'t we do that too?</p>
<p>This is because when you use the <code>@my_decorator</code> syntax, you are
applying a wrapper function with a single function as a parameter.
Remember, everything in Python is an object, and this includes
functions! With that in mind, we can write a function that returns a
wrapper function.</p>
<h3 id="nesting-a-decorator-within-a-function">Nesting a Decorator Within a Function<a class="headerlink" href="#nesting-a-decorator-within-a-function" title="Permanent link">&para;</a></h3>
<p>Let's go back to our logging example, and create a wrapper which lets
us specify a logfile to output to.</p>
<pre><code class="language-python">from functools import wraps

def logit(logfile='out.log'):
    def logging_decorator(func):
        @wraps(func)
        def wrapped_function(*args, **kwargs):
            log_string = func.__name__ + &quot; was called&quot;
            print(log_string)
            # Open the logfile and append
            with open(logfile, 'a') as opened_file:
                # Now we log to the specified logfile
                opened_file.write(log_string + '\n')
            return func(*args, **kwargs)
        return wrapped_function
    return logging_decorator

@logit()
def myfunc1():
    pass

myfunc1()
# Output: myfunc1 was called
# A file called out.log now exists, with the above string

@logit(logfile='func2.log')
def myfunc2():
    pass

myfunc2()
# Output: myfunc2 was called
# A file called func2.log now exists, with the above string
</code></pre>
<h3 id="decorator-classes">Decorator Classes<a class="headerlink" href="#decorator-classes" title="Permanent link">&para;</a></h3>
<p>Now we have our logit decorator in production, but when some parts of
our application are considered critical, failure might be something that
needs more immediate attention. Let\'s say sometimes you want to just
log to a file. Other times you want an email sent, so the problem is
brought to your attention, and still keep a log for your own records.
This is a case for using inheritence, but so far we\'ve only seen
functions being used to build decorators.</p>
<p>Luckily, classes can also be used to build decorators. So, let\'s
rebuild logit as a class instead of a function.</p>
<pre><code class="language-python">class logit(object):

       _logfile = 'out.log'
   
    def __init__(self, func):
        self.func = func

       def __call__(self, *args):
           log_string = self.func.__name__ + &quot; was called&quot;
        print(log_string)
        # Open the logfile and append
           with open(self._logfile, 'a') as opened_file:
            # Now we log to the specified logfile
            opened_file.write(log_string + '\n')
        # Now, send a notification
        self.notify()

           # return base func
           return self.func(*args)

           

    def notify(self):
        # logit only logs, no more
        pass
</code></pre>
<p>This implementation has an additional advantage of being much cleaner
than the nested function approach, and wrapping a function still will
use the same syntax as before:</p>
<pre><code class="language-python">   logit._logfile = 'out2.log' # if change log file
   @logit
   def myfunc1():
       pass

   myfunc1()
   # Output: myfunc1 was called
</code></pre>
<p>Now, let's subclass logit to add email functionality (though this topic
will not be covered here).</p>
<pre><code class="language-python">class email_logit(logit):
    '''
    A logit implementation for sending emails to admins
    when the function is called.
    '''
    def __init__(self, email='admin@myproject.com', *args, **kwargs):
        self.email = email
        super(email_logit, self).__init__(*args, **kwargs)

    def notify(self):
        # Send an email to self.email
        # Will not be implemented here
        pass
</code></pre>
<p>From here, <code>@email_logit</code> works just like <code>@logit</code> but sends an email to
the admin in addition to logging.</p>
<h1 id="enumerate">Enumerate<a class="headerlink" href="#enumerate" title="Permanent link">&para;</a></h1>
<p>Enumerate is a built-in function of Python. Its usefulness can not be
summarized in a single line. Yet most of the newcomers and even some
advanced programmers are unaware of it. It allows us to loop over
something and have an automatic counter. Here is an example:</p>
<pre><code class="language-python">for counter, value in enumerate(some_list):
    print(counter, value)
</code></pre>
<p>And there is more! <code>enumerate</code> also accepts an optional argument which
makes it even more useful.</p>
<pre><code class="language-python">my_list = ['apple', 'banana', 'grapes', 'pear']
for c, value in enumerate(my_list, 1):
    print(c, value)

# Output:
# 1 apple
# 2 banana
# 3 grapes
# 4 pear
</code></pre>
<p>The optional argument allows us to tell <code>enumerate</code> from where to start
the index. You can also create tuples containing the index and list item
using a list. Here is an example:</p>
<pre><code class="language-python">my_list = ['apple', 'banana', 'grapes', 'pear']
counter_list = list(enumerate(my_list, 1))
print(counter_list)
# Output: [(1, 'apple'), (2, 'banana'), (3, 'grapes'), (4, 'pear')]
</code></pre>
<h1 id="file-handling">File Handling<a class="headerlink" href="#file-handling" title="Permanent link">&para;</a></h1>
<h2 id="ignore-rows">Ignore Rows<a class="headerlink" href="#ignore-rows" title="Permanent link">&para;</a></h2>
<p>skip header row</p>
<pre><code class="language-python">with open(fname) as f:
    next(f)
    for line in f:
        #do something
</code></pre>
<p>ignore blank lines</p>
<pre><code class="language-python">def nonblank_lines(f):
    for l in f:
        line = l.rstrip()
        if line:
            yield line

with open(filename) as f_in:
    for line in nonblank_lines(f_in):
        # Stuff
</code></pre>
<h1 id="generators">Generators<a class="headerlink" href="#generators" title="Permanent link">&para;</a></h1>
<p>First lets understand iterators. According to Wikipedia, an iterator is
an object that enables a programmer to traverse a container,
particularly lists. However, an iterator performs traversal and gives
access to data elements in a container, but does not perform iteration.
You might be confused so lets take it a bit slow. There are three parts
namely:</p>
<ul>
<li>Iterable</li>
<li>Iterator</li>
<li>Iteration</li>
</ul>
<p>All of these parts are linked to each other. We will discuss them one by
one and later talk about generators.</p>
<h2 id="iterable">Iterable<a class="headerlink" href="#iterable" title="Permanent link">&para;</a></h2>
<p>An <code>iterable</code> is any object in Python which has an <code>__iter__</code> or a
<code>__getitem__</code> method defined which returns an <strong>iterator</strong> or can take
indexes (You can read more about them
<a href="https://stackoverflow.com/a/20551346">here</a>). In short an <code>iterable</code> is
any object which can provide us with an <strong>iterator</strong>. So what is an
<strong>iterator</strong>?</p>
<h2 id="iterator">Iterator<a class="headerlink" href="#iterator" title="Permanent link">&para;</a></h2>
<p>An iterator is any object in Python which has a <code>next</code> (Python2) or
<code>__next__</code> method defined. That\'s it. That\'s an iterator. Now let\'s
understand <strong>iteration</strong>.</p>
<h2 id="iteration">Iteration<a class="headerlink" href="#iteration" title="Permanent link">&para;</a></h2>
<p>In simple words it is the process of taking an item from something e.g a
list. When we use a loop to loop over something it is called iteration.
It is the name given to the process itself. Now as we have a basic
understanding of these terms let\'s understand <strong>generators</strong>.</p>
<h2 id="generators-generators-1">Generators {#generators-1}<a class="headerlink" href="#generators-generators-1" title="Permanent link">&para;</a></h2>
<p>Generators are iterators, but you can only iterate over them once. It's
because they do not store all the values in memory, they generate the
values on the fly. You use them by iterating over them, either with a
\'for\' loop or by passing them to any function or construct that
iterates. Most of the time <code>generators</code> are implemented as functions.
However, they do not <code>return</code> a value, they <code>yield</code> it. Here is a simple
example of a <code>generator</code> function:</p>
<pre><code class="language-python">def generator_function():
    for i in range(10):
        yield i

for item in generator_function():
    print(item)

# Output: 0
# 1
# 2
# 3
# 4
# 5
# 6
# 7
# 8
# 9
</code></pre>
<p>It is not really useful in this case. Generators are best for
calculating large sets of results (particularly calculations involving
loops themselves) where you don\'t want to allocate the memory for all
results at the same time. Many Standard Library functions that return
<code>lists</code> in Python 2 have been modified to return <code>generators</code> in Python
3 because <code>generators</code> require fewer resources.</p>
<p>Here is an example <code>generator</code> which calculates fibonacci numbers:</p>
<pre><code class="language-python"># generator version
def fibon(n):
    a = b = 1
    for i in range(n):
        yield a
        a, b = b, a + b
</code></pre>
<p>Now we can use it like this:</p>
<pre><code class="language-python">for x in fibon(1000000):
    print(x)
</code></pre>
<p>This way we would not have to worry about it using a lot of resources.
However, if we would have implemented it like this:</p>
<pre><code class="language-python">def fibon(n):
    a = b = 1
    result = []
    for i in range(n):
        result.append(a)
        a, b = b, a + b
    return result
</code></pre>
<p>It would have used up all our resources while calculating a large input.
We have discussed that we can iterate over <code>generators</code> only once but we
haven\'t tested it. Before testing it you need to know about one more
built-in function of Python, <code>next()</code>. It allows us to access the next
element of a sequence. So let\'s test out our understanding:</p>
<pre><code class="language-python">def generator_function():
    for i in range(3):
        yield i

gen = generator_function()
print(next(gen))
# Output: 0
print(next(gen))
# Output: 1
print(next(gen))
# Output: 2
print(next(gen))
# Output: Traceback (most recent call last):
#            File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
#         StopIteration
</code></pre>
<p>As we can see that after yielding all the values <code>next()</code> caused a
<code>StopIteration</code> error. Basically this error informs us that all the
values have been yielded. You might be wondering why we don\'t get this
error when using a <code>for</code> loop? Well the answer is simple. The <code>for</code> loop
automatically catches this error and stops calling <code>next</code>. Did you know
that a few built-in data types in Python also support iteration? Let\'s
check it out:</p>
<pre><code class="language-python">my_string = &quot;Yasoob&quot;
next(my_string)
# Output: Traceback (most recent call last):
#      File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
#    TypeError: str object is not an iterator
</code></pre>
<p>Well that\'s not what we expected. The error says that <code>str</code> is not an
iterator. Well it\'s right! It\'s an iterable but not an iterator. This
means that it supports iteration but we can\'t iterate over it directly.
So how would we iterate over it? It\'s time to learn about one more
built-in function, <code>iter</code>. It returns an <code>iterator</code> object from an
iterable. While an <code>int</code> isn\'t an iterable, we can use it on string!</p>
<pre><code class="language-python">int_var = 1779
iter(int_var)
# Output: Traceback (most recent call last):
#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
# TypeError: 'int' object is not iterable
# This is because int is not iterable

my_string = &quot;Yasoob&quot;
my_iter = iter(my_string)
print(next(my_iter))
# Output: 'Y'
</code></pre>
<p>Now that is much better. I am sure that you loved learning about
generators. Do bear it in mind that you can fully grasp this concept
only when you use it. Make sure that you follow this pattern and use
<code>generators</code> whenever they make sense to you. You won\'t be
disappointed!</p>
<h1 id="lambdas">Lambdas<a class="headerlink" href="#lambdas" title="Permanent link">&para;</a></h1>
<p>Lambdas are one line functions. They are also known as anonymous
functions in some other languages.</p>
<p><strong>Blueprint</strong></p>
<pre><code class="language-python">lambda argument: manipulate(argument)
</code></pre>
<p><strong>Example</strong></p>
<pre><code class="language-python">add = lambda x, y: x + y

print(add(3, 5))
# Output: 8
</code></pre>
<p>Here are a few useful use cases for lambdas and just a few ways in which
they are used in the wild:</p>
<p><strong>List sorting</strong></p>
<pre><code class="language-python">a = [(1, 2), (4, 1), (9, 10), (13, -3)]
a.sort(key=lambda x: x[1])

print(a)
# Output: [(13, -3), (4, 1), (1, 2), (9, 10)]
</code></pre>
<p><strong>Parallel sorting of lists</strong></p>
<pre><code class="language-python">data = zip(list1, list2)
data = sorted(data)
list1, list2 = map(lambda t: list(t), zip(*data))
</code></pre>
<p>class A(object):
    def foo(self, x):
        print "executing foo(%s, %s)" % (self, x)</p>
<pre><code>@classmethod
def class_foo(cls, x):
    print "executing class_foo(%s, %s)" % (cls, x)

@staticmethod
def static_foo(x):
    print "executing static_foo(%s)" % x
</code></pre>
<p>a = A()</p>
<h1 id="typing">Typing<a class="headerlink" href="#typing" title="Permanent link">&para;</a></h1>
<p><a href="https://docs.python.org/3/library/typing.html#module-typing"><code>typing</code></a> : Support for type hints.</p>
<pre><code>def greeting(name: str) -&gt; str:
return 'Hello ' + name
</code></pre>
<p>In the function <code>greeting</code>, the argument <code>name</code> is expected to be of type <code>str</code> and the return type <code>str</code> Subtypes are accepted as arguments</p>
<p><a href="https://docs.python.org/3/library/typing.html#typing.Union"><code>typing.Union</code></a></p>
<p><code>Union[X,  Y]</code>  means either X or Y</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            2020, songzhenhe
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>